\documentclass[class=exam, crop=false]{standalone}
\newif\ifitsquestion
\itsquestiontrue
% \documentclass[class=exam,crop=false]{standalone}
\input{../../exmain.tex}
% for compatibility with older problem sets
\toggletrue{usenewuseproblem}
% \usepackage[subpreambles=true]{standalone}

\loadallproblems[lq]{ch2_refraction_lq.tex}
\loadallproblems[mc]{ch2_refraction_mc.tex}

\begin{document}
\setup{光的折射及全内反射}{}
\setlength{\tabcolsep}{10pt}

\section*{結構題}
\begin{questions}
    % \ansdisplay
    \toggletrue{isitlq}
    \foreachproblem[lq]{
        \question \thisproblem
        \dlines{1}\clearpage
    }
\end{questions}

\section*{多項選擇題}
% 以下所有題目取$g=$ \acc{9.81}。
\begin{questions}
    % \ansdisplay
    \foreachproblem[mc]{
        \togglefalse{isitlq}
        % \itsquestionfalse has to put to the previous before.
        \def\printitsquestion{
            \ifitsquestion
                \filbreak\question\thisproblem
            \else
                \clearpage\useproblem[mc]{\thisproblemlabel}
                \itsquestiontrue
            \fi
        }
        \printitsquestion
    }
\end{questions}

\end{document}